<!DOCTYPE html>
<html lang="en">
	<head> 
   		<meta charset="utf-8"> 
	</head>
	<body>
    		<!-- content start -->
    		<div amtype='NavBar'  title='数据缓存' mode='dark' leftIcon='left' rightIcon='ellipsis'> </div>
    		    
    		<div amtype='ListView' init='init($event)' up='true' down='true'>
    		    <div style='margin-bottom:10px;background-color:#fff;'>
    		        <div style='line-height:50px;color:#888;font-size:18px;'>{title}</div>
    		        <div style='display:flex;flex-direction:row;padding:15px'>
    		            <div style='line-height:35px'>
    		                <div style='margin-bottom:8px;font-weight:bold'>{des}</div>
    		                <div><span style='font-size:30px;color:#FF6E27'>35</span>¥</div>
    		            </div>
    		        </div>
    		        <div amtype='Button' type='primary' text='ccc'> </div>
    		    </div>
    		</div>    
			<!-- content end -->
	</body>
	<script> 
		var amVAR = {};
		
		//数据默认加载缓存
		function init(instance) {
		
		    instance.refresh(function (resolove) { 
		    	//获取缓存数据
		    	$Local.getCache('mainList', function(mainList) {
		    	    mainList = mainList || []
		    		resolove(mainList)
		    	});
		    });
		}
		
		$Page.didMount = function() {
			//用setTimeout模拟接口请求
			setTimeout(function() {
				var data = [{
					title: 'meethtol-1',
					des: '风吹日历1'
				},{
					title: 'meethtol-2',
					des: '风吹日历2'
				},{
					title: 'meethtol-3',
					des: '风吹日历3'
				}]
				
				$Local.setCache('mainList', JSON.stringify(data))
				$ListView('id').setData(data);
			
			}, 2000)
		}    </script> 
</html>