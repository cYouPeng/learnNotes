<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.SecondTitleMapper">

  <resultMap type="secondTitle" id="stResultMap">
    <id property="sid" column="sid"></id>
    <result property="titleName" column="titlename"></result>
    <result property="newContent" column="newContent"></result>
    <result property="creator" column="creator"></result>
    <result property="createTime" column="createTime"></result>
    <result property="parentTitleId" column="parentTitleId"></result>
    <association property="ft" javaType="firstTitle">
      <id property="fid" column="fid"></id>
      <result property="titleName" column="fttitlename"></result>
      <result property="creator" column="ftcreator"></result>
      <result property="createTime" column="ftcreatetime"></result>
    </association>
  </resultMap>
  
  <resultMap type="secondTitle" id="stResultMapByLazy">
    <id property="sid" column="sid"></id>
    <result property="titleName" column="titlename"></result>
    <result property="newContent" column="newContent"></result>
    <result property="creator" column="creator"></result>
    <result property="createTime" column="createTime"></result>
    <result property="parentTitleId" column="parentTitleId"></result>
    <association property="ft" 
                 javaType="firstTitle" 
                 select="mapper.FirstTitleMapper.selectFirstTitleByIdByLazy"
                 column="parentTitleId"/>
  </resultMap>
  
  <select id="selectSecondTitleAll" resultMap="stResultMap">
    select s.*,
           f.fid,
           f.titlename fttitlename,
           f.creator ftcreator,
           f.createtime ftcreatetime
    from firsttitle f,secondtitle s
    where f.fid=s.parenttitleid       
    order by s.sid 
  </select>
  
  <select id="selectSecondTitleAllByLazy" resultMap="stResultMapByLazy">
    select * from secondtitle order by sid 
  </select>
  
  <select id="selectSecondTitleByFidByLazy" resultType="secondTitle">
    select * from secondtitle where parenttitleid = #{param} order by sid
  </select>
  
</mapper>     